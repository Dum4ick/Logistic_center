<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LogisticCenter.MainMenuPage"
             BackgroundColor="#0B0B0F">

    <!-- ===== КОРНЕВОЙ GRID (2 СЛОЯ) ===== -->
    <Grid>

        <!-- ================= ОСНОВНОЙ КОНТЕНТ ================= -->
        <Grid ColumnDefinitions="240,*">

            <!-- ===== ЛЕВАЯ ПАНЕЛЬ ===== -->
            <!--<Border Grid.Column="0"
                    Margin="10"
                    Stroke="#8B5CF6"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 20"
                    BackgroundColor="#14141A">-->

            <VerticalStackLayout Padding="20" Spacing="16" BackgroundColor="#14141A">

                    <Label Text="LOGISTIC CENTER"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#8B5CF6"
                           HorizontalOptions="Center"/>

                    <BoxView HeightRequest="2" Color="#2A2A36" WidthRequest="240"/>

                    <Button Text="📦  Товары"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

                    <Button Text="🧾  Заказы"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

                    <Button Text="📊  Остатки"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

                    <Button Text="🏭  Склады"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

                    <Button Text="👤  Пользователи"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

                <Button Text="📈  Отчёты"
                            BackgroundColor="#1C1C26"
                            TextColor="White"
                            CornerRadius="16"/>

            </VerticalStackLayout>
            <!--</Border>-->


            <Button
                Text="🚪  Выход"
                Command="{Binding Logout_ClickedCommand}"
                BackgroundColor="#8B5CF6"
                TextColor="White"
                CornerRadius="16"
                VerticalOptions="End"
                Margin="16"/>

            <!-- ===== ОСНОВНАЯ ОБЛАСТЬ ===== -->
            <Border Grid.Column="1"
                    Margin="10"
                    Stroke="#8B5CF6"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 20"
                    BackgroundColor="#14141A">

                <Grid Padding="24" RowDefinitions="Auto,*">

                    <!-- ===== ШАПКА ===== -->
                    <Grid ColumnDefinitions="*,Auto,Auto">

                        <Label Text="Панель администратора"
                               FontSize="26"
                               FontAttributes="Bold"
                               TextColor="White"
                               VerticalOptions="Center"/>

                        <Label Text="{Binding FullName}"
                               Grid.Column="1"
                               TextColor="#8B5CF6"
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               Margin="0,0,10,0"/>

                        <Button Text="👤"
                                Grid.Column="2"
                                BorderColor="#8B5CF6"
                                BorderWidth="1"
                                BackgroundColor="#1C1C26"
                                CornerRadius="16"
                                Command="{Binding ToggleProfileMenuCommand}"/>

                    </Grid>

                    <!-- ===== КАРТОЧКИ ===== -->
                    <Grid Grid.Row="1"
                          Margin="0,28,0,0"
                          ColumnDefinitions="*,*,*"
                          RowDefinitions="*,*"
                          ColumnSpacing="20"
                          RowSpacing="20">

                        <Border BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="📦 Товары" FontSize="18" TextColor="White"/>
                                <Label Text="Управление каталогом" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                        <Border Grid.Column="1" BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6" StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="🧾 Заказы" FontSize="18" TextColor="White"/>
                                <Label Text="Контроль заказов" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                        <Border Grid.Column="2" BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6" StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="📊 Остатки" FontSize="18" TextColor="White"/>
                                <Label Text="Складской учёт" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                        <Border Grid.Row="1" BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6" StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="👤 Пользователи" FontSize="18" TextColor="White"/>
                                <Label Text="Роли и доступ" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                        <Border Grid.Row="1" Grid.Column="1" BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6" StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="🚚 Отгрузки" FontSize="18" TextColor="White"/>
                                <Label Text="Доставка" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                        <Border Grid.Row="1" Grid.Column="2" BackgroundColor="#1C1C26"
                                Stroke="#8B5CF6" StrokeThickness="1"
                                StrokeShape="RoundRectangle 20">
                            <VerticalStackLayout Padding="20">
                                <Label Text="📈 Отчёты" FontSize="18" TextColor="White"/>
                                <Label Text="Аналитика" TextColor="#C7C7D1"/>
                            </VerticalStackLayout>
                        </Border>

                    </Grid>

                </Grid>
            </Border>
        </Grid>

        <!-- ================= OVERLAY ПРОФИЛЯ ================= -->
        <Grid IsVisible="{Binding IsProfileMenuVisible}"
              BackgroundColor="#50000000"
              ZIndex="100"
              HorizontalOptions="Fill"
              VerticalOptions="Fill">

            <!-- Клик по фону закрывает меню -->
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding ToggleProfileMenuCommand}" />
            </Grid.GestureRecognizers>

            <!-- Окно профиля -->
            <Border HorizontalOptions="End"
            VerticalOptions="Start"
            Margin="0,35,35,0"
            BackgroundColor="#1C1C26"
            Stroke="#8B5CF6"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 18"
            ZIndex="101">

                <VerticalStackLayout Padding="20" Spacing="10" WidthRequest="260">

                    <Label Text="{Binding FullName}"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="White"/>

                    <Label Text="{Binding Username}"
                   FontSize="14"
                   TextColor="#C7C7D1"/>

                    <Label Text="{Binding Email}"
                   FontSize="14"
                   TextColor="#C7C7D1"/>

                    <BoxView HeightRequest="1"
                     Color="#2A2A36"
                     Margin="0,10"/>

                    <Button Text="✏ Назначить имя"
                    BackgroundColor="#14141A"
                    BorderColor="#8B5CF6"
                    BorderWidth="1"
                    TextColor="White"
                    CornerRadius="14"/>

                    <Button Text="🚪 Выйти"
                    BackgroundColor="#8B5CF6"
                    TextColor="White"
                    CornerRadius="14"
                    Command="{Binding Logout_ClickedCommand}"/>

                </VerticalStackLayout>
            </Border>
        </Grid>


    </Grid>
</ContentPage>
