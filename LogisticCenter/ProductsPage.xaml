<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LogisticCenter.ProductsPage"
             BackgroundColor="#121212">

    <Grid Padding="20"
          RowDefinitions="Auto,Auto,*"
          RowSpacing="10">

        <Grid ColumnDefinitions="Auto,*"
              VerticalOptions="Center">

            <Label Grid.Column="0"
                   Text="Ð¢Ð¾Ð²Ð°Ñ€Ñ‹"
                   FontSize="26"
                   FontAttributes="Bold"
                   TextColor="White"
                   VerticalOptions="Center"
                   Margin="12,0,0,0"/>

            <Button Grid.Column="1"
                    Text="â†© Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ"
                    Command="{Binding GoBackCommand}"
                    BackgroundColor="#1C1C26"
                    BorderColor="#00cccc"
                    BorderWidth="2"
                    TextColor="White"
                    CornerRadius="10"
                    HeightRequest="44"
                    HorizontalOptions="End"/>
        </Grid>

        <FlexLayout Grid.Row="1"
                    Wrap="Wrap"
                    Direction="Row"
                    AlignItems="Center"
                    JustifyContent="Start">

            <Border Padding="10"
                    BackgroundColor="#1C1C26"
                    Stroke="#00cccc"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 10"
                    FlexLayout.Basis="300"
                    FlexLayout.Grow="1"
                    HeightRequest="50"
                    Margin="0,0,5,0">

                <Grid ColumnDefinitions="Auto,*">

                    <Button Text="ðŸ”"
                       HeightRequest="50"
                       BackgroundColor="Transparent"
                       FontSize="18"
                       TextColor="#00cccc"
                       VerticalOptions="Center"
                       Command="{Binding SearchCommand}"/>

                    <Entry Grid.Column="1"
                       Placeholder="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ Ð¸Ð»Ð¸ ÐºÐ°Ñ‚ÐµÐºÐ¾Ñ€Ð¸Ð¸"
                       Text="{Binding SearchText}"
                       TextColor="White"
                       PlaceholderColor="#777"
                       BackgroundColor="Transparent"
                       ClearButtonVisibility="WhileEditing"
                       HeightRequest="50"/>

                </Grid>
            </Border>

            <Picker
                ItemsSource="{Binding Categories}"
                SelectedItem="{Binding SelectedCategory}"
                BackgroundColor="#1C1C26"
                TextColor="White"
                Margin="0,0,5,0"/>


            <Button Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"
                    Command="{Binding AddCommand}"
                    BackgroundColor="#00cccc"
                    TextColor="White"
                    CornerRadius="10"
                    Margin="0,0,5,0"
                    IsVisible="{Binding Roles.Level3}"/>

            <Button Text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                    Command="{Binding EditCommand}"
                    BackgroundColor="#1C1C26"
                    TextColor="White"
                    CornerRadius="10"
                    Margin="0,0,5,0"
                    IsVisible="{Binding Roles.Level3}"/>

            <Button Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
                    Command="{Binding DeleteCommand}"
                    BackgroundColor="#FF4D4D"
                    TextColor="White"
                    CornerRadius="10"
                    IsVisible="{Binding Roles.Level3}"/>

        </FlexLayout>
        
        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Products}"
                        SelectedItem="{Binding SelectedProduct}"
                        SelectionMode="Single">

            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical"
                     Span="4"
                     HorizontalItemSpacing="10"
                     VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            
            

            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <Frame Padding="16"
                        BackgroundColor="#1C1C26"
                        BorderColor="Transparent">

                        <VerticalStackLayout Spacing="5">

                            <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ -->
                            <Label Text="{Binding Name }"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="White"/>  

                            <!-- ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ -->
                            <Label Text="{Binding Category}" TextColor="#00cccc"/>

                            <!-- Ð’ÐµÑ -->
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="Ð’ÐµÑ:" TextColor="#AAAAAA"/>
                                <Label Text="{Binding Weight}" TextColor="White"/>
                                <Label Text="ÐºÐ³"/>
                            </HorizontalStackLayout>

                            <!-- Ð¦ÐµÐ½Ð° -->
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="Ð¦ÐµÐ½Ð°:" TextColor="#AAAAAA"/>
                                <Label Text="{Binding Price}" TextColor="White"/>
                                <Label Text="Ñ€."/>
                            </HorizontalStackLayout>

                        </VerticalStackLayout>

                    </Frame>

                </DataTemplate>
            </CollectionView.ItemTemplate>


        </CollectionView>

    </Grid>
</ContentPage>
