<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LogisticCenter.UsersPage"
             BackgroundColor="#121212">

    <Grid Padding="20" RowDefinitions="Auto,Auto,*" RowSpacing="16">

        <!-- ===== Ð—ÐÐ“ÐžÐ›ÐžÐ’ÐžÐš ===== -->

        <Grid ColumnDefinitions="Auto,*" VerticalOptions="Center">

            <Label Grid.Column="0"
                Text="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸"
                FontSize="26"
                FontAttributes="Bold"
                TextColor="White"
                VerticalOptions="Center"
                Margin="12,0,0,0"/>

            <Button Grid.Column="1"
                Text='â†© Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ'
                FontAttributes="Bold"
                Command="{Binding GoBackCommand}"
                BackgroundColor="#1C1C26"
                BorderColor="#00cccc"
                BorderWidth="2"
                TextColor="White"
                CornerRadius="10"
                HeightRequest="44"
                HorizontalOptions="End"/>
            
        </Grid>


        <!-- ===== ÐšÐÐžÐŸÐšÐ˜ Ð”Ð•Ð™Ð¡Ð¢Ð’Ð˜Ð™ ===== -->
        <FlexLayout Grid.Row="1"
            Wrap="Wrap"
            Direction="Row"
            AlignItems="Center"
            JustifyContent="Start">

        <!-- ÐŸÐžÐ˜Ð¡Ðš -->
        <Border Padding="10"
                BackgroundColor="#1C1C26"
                Stroke="#00cccc"
                StrokeThickness="2"
                StrokeShape="RoundRectangle 10"
                FlexLayout.Basis="300"
                FlexLayout.Grow="1"
                HeightRequest="50">

            <Grid ColumnDefinitions="Auto,*">
                
                <Label Text="ðŸ”"
                       FontSize="18"
                       TextColor="#00cccc"
                       VerticalOptions="Center"/>

                <Entry Grid.Column="1"
                       Placeholder="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¸Ð¼ÐµÐ½Ð¸, email Ð¸Ð»Ð¸ Ñ€Ð¾Ð»Ð¸"
                       Text="{Binding SearchText}"
                       TextColor="White"
                       PlaceholderColor="#777"
                       BackgroundColor="Transparent"
                       ClearButtonVisibility="WhileEditing"
                       HeightRequest="50"/>
                
            </Grid>
    </Border>

    <!-- ÐšÐÐžÐŸÐšÐ˜ -->
    <Button Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"
            Command="{Binding AddUserCommand}"
            BackgroundColor="#00cccc"
            TextColor="White"
            CornerRadius="10"/>

    <Button Text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
            Command="{Binding EditUserCommand}"
            BackgroundColor="#1C1C26"
            BorderColor="#00cccc"
            TextColor="White"
            CornerRadius="10"/>

    <Button Text="ÐÐ°Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð»ÑŒ"
            Command="{Binding AssignRoleCommand}"
            BackgroundColor="#1C1C26"
            BorderColor="#00cccc"
            TextColor="White"
            CornerRadius="10"/>

    <Button Text="Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
            Command="{Binding BlockUserCommand}"
            BackgroundColor="#1C1C26"
            TextColor="#FF4D4D"
            CornerRadius="10"/>

    <Button Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
            Command="{Binding DeleteUserCommand}"
            BackgroundColor="#FF4D4D"
            TextColor="White"
            CornerRadius="10"/>

</FlexLayout>

        

        <!-- ===== Ð¡ÐŸÐ˜Ð¡ÐžÐš ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð•Ð™ ===== -->
        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Users}"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedUser}">
            
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical"
                           ItemSpacing="5"/>
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <Border Padding="16"
                            BackgroundColor="#1C1C26"
                            Stroke="#00cccc"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 10">

                        <Grid ColumnDefinitions="*,Auto">

                            <VerticalStackLayout Spacing="4">
                                <Label Text="{Binding FullName}"
                                       FontSize="16"
                                       TextColor="White"
                                       FontAttributes="Bold"/>

                                <Label Text="{Binding Email}"
                                       FontSize="13"
                                       TextColor="#C7C7D1"/>

                                <Label Text="{Binding Role}"
                                       FontSize="12"
                                       TextColor="#00cccc"/>
                            </VerticalStackLayout>

                            <Label Text="{Binding Status}"
                                   Grid.Column="1"
                                   VerticalOptions="Center"
                                   TextColor="{Binding StatusColor}"
                                   FontAttributes="Bold"/>

                        </Grid>
                    </Border>

                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
