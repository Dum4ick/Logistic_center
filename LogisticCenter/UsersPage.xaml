<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LogisticCenter.UsersPage"
             BackgroundColor="#121212">

    <Grid Padding="20" RowDefinitions="Auto,Auto,*" RowSpacing="16">

        <!-- ===== Ð—ÐÐ“ÐžÐ›ÐžÐ’ÐžÐš ===== -->
        <!-- ===== Ð—ÐÐ“ÐžÐ›ÐžÐ’ÐžÐš ===== -->
        <Grid ColumnDefinitions="Auto,*" VerticalOptions="Center">

            <Button Text="â¬…"
            Command="{Binding GoBackCommand}"
            BackgroundColor="#1C1C26"
            BorderColor="#8B5CF6"
            BorderWidth="1"
            TextColor="White"
            CornerRadius="12"
            WidthRequest="44"
            HeightRequest="44"/>

            <Label Grid.Column="1"
           Text="ðŸ‘¤ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸"
           FontSize="26"
           FontAttributes="Bold"
           TextColor="White"
           VerticalOptions="Center"
           Margin="12,0,0,0"/>
        </Grid>


        <!-- ===== ÐšÐÐžÐŸÐšÐ˜ Ð”Ð•Ð™Ð¡Ð¢Ð’Ð˜Ð™ ===== -->
        <HorizontalStackLayout Grid.Row="1" Spacing="12">

            <Button Text="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"
                    Command="{Binding AddUserCommand}"
                    BackgroundColor="#8B5CF6"
                    TextColor="White"
                    CornerRadius="14"/>

            <Button Text="âœ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                    Command="{Binding EditUserCommand}"
                    BackgroundColor="#1C1C26"
                    BorderColor="#8B5CF6"
                    BorderWidth="1"
                    TextColor="White"
                    CornerRadius="14"/>

            <Button Text="ðŸ›¡ ÐÐ°Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð»ÑŒ"
                    Command="{Binding AssignRoleCommand}"
                    BackgroundColor="#1C1C26"
                    BorderColor="#8B5CF6"
                    BorderWidth="1"
                    TextColor="White"
                    CornerRadius="14"/>

            <Button Text="â›” Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                    Command="{Binding BlockUserCommand}"
                    BackgroundColor="#1C1C26"
                    BorderColor="#FF4D4D"
                    BorderWidth="1"
                    TextColor="White"
                    CornerRadius="14"/>

            <Button Text="ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
                    Command="{Binding DeleteUserCommand}"
                    BackgroundColor="#FF4D4D"
                    TextColor="White"
                    CornerRadius="14"/>

        </HorizontalStackLayout>

        <!-- ===== Ð¡ÐŸÐ˜Ð¡ÐžÐš ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð•Ð™ ===== -->
        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Users}"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedUser}">

            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <Border Margin="0,6"
                            Padding="16"
                            BackgroundColor="#1C1C26"
                            Stroke="#8B5CF6"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 16">

                        <Grid ColumnDefinitions="*,Auto">

                            <VerticalStackLayout Spacing="4">
                                <Label Text="{Binding FullName}"
                                       FontSize="16"
                                       TextColor="White"
                                       FontAttributes="Bold"/>

                                <Label Text="{Binding Email}"
                                       FontSize="13"
                                       TextColor="#C7C7D1"/>

                                <Label Text="{Binding Role}"
                                       FontSize="12"
                                       TextColor="#8B5CF6"/>
                            </VerticalStackLayout>

                            <Label Text="{Binding Status}"
                                   Grid.Column="1"
                                   VerticalOptions="Center"
                                   TextColor="{Binding StatusColor}"
                                   FontAttributes="Bold"/>

                        </Grid>
                    </Border>

                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
